/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/layout/cssgrid/GridLayoutBase","sap/ui/layout/cssgrid/VirtualGrid","sap/ui/dom/units/Rem","sap/ui/Device","sap/ui/layout/library"],function(t,e,i,o,r){"use strict";var a=o.toPx(1);var s=t.getConfiguration().getRTL();var u={S:4,M:8,ML:12,L:12,XL:16,XXL:20,XXXL:20};var l="RCLRangeSet";r.media.initRangeSet(l,[600,1024,1280,1440,1620,1920],"px",["S","M","ML","L","XL","XXL","XXXL"],true);function n(t){var e=t.getLayoutData();return e&&e.isA("sap.ui.layout.cssgrid.ResponsiveColumnItemLayoutData")?e.getColumns():1}function p(t){var e=t.getLayoutData();return e&&e.isA("sap.ui.layout.cssgrid.ResponsiveColumnItemLayoutData")?e.getRows():1}var y=e.extend("sap.ui.layout.cssgrid.ResponsiveColumnLayout",{metadata:{library:"sap.ui.layout",properties:{},events:{layoutChange:{parameters:{layout:{type:"string"}}}}}});y.prototype._sCurrentLayoutClassName="";y.prototype.isResponsive=function(){return true};y.prototype.onGridAfterRendering=function(t){this._applyLayout(t)};y.prototype.getActiveGridSettings=function(){return null};y.prototype.onGridResize=function(t){if(!t||t.size.width===0){return}this._applyLayout(t.control)};y.prototype.renderSingleGridLayout=function(t){if(this.isGridSupportedByBrowser()){t.class("sapUiLayoutCSSGridRCL")}else{t.class("sapUiLayoutCSSGridRCLPolyfill")}};y.prototype.hasGridPolyfill=function(){return true};y.prototype.getPolyfillSizes=function(t){var e=t.$(),i=e.parent().outerWidth(),o=r.media.getCurrentRange(l,i),s=u[o.name],n=e.innerWidth(),p=Math.floor((n-a*(s-1))/s);return{gap:a,rows:this._oVirtualGrid.rowsHeights.map(function(t){return t+"px"}),columns:new Array(s).fill(p+"px")}};y.prototype._applyLayout=function(t){var e=t.$().parent().outerWidth(),i=r.media.getCurrentRange(l,e),o="sapUiLayoutCSSGridRCL-Layout"+i.name,a=this.isGridSupportedByBrowser();if(!a){this._scheduleIEPolyfill(t,i)}if(this._sCurrentLayoutClassName===o){return}if(a){t.removeStyleClass(this._sCurrentLayoutClassName);t.addStyleClass(o)}this._sCurrentLayoutClassName=o;this.fireLayoutChange({layout:i.name})};y.prototype._scheduleIEPolyfill=function(t,e){if(this._iPolyfillCallId){clearTimeout(this._iPolyfillCallId)}this._iPolyfillCallId=setTimeout(function(){var i=t.isA("sap.f.GridList")?"listUl":"",o=t.$(i);this._applyIEPolyfillLayout(t,o,e)}.bind(this),0)};y.prototype._applyIEPolyfillLayout=function(t,e,o){if(t.bIsDestroyed){return}var r=u[o.name],l=e.innerWidth(),y=t.getItems(),f=Math.floor((l-a*(r-1))/r),d,h,g,c,L,C,m;for(m=0;m<y.length;m++){g=y[m];c=g.$();d=n(g);c.css({position:"absolute",height:"auto",width:f*d+a*(d-1)})}var v=new i;this._oVirtualGrid=v;v.init({numberOfCols:r,cellWidth:f,unitOfMeasure:"px",gapSize:a,topOffset:0,leftOffset:0,allowDenseFill:false,rtl:s,width:l,rowsAutoHeight:true});for(m=0;m<y.length;m++){g=y[m];if(!g.getVisible()){continue}c=g.$();d=n(g);h=p(g);v.fitElement(m+"",d,h,c.outerHeight(true))}v.calculatePositions();L=v.getItems();for(m=0;m<y.length;m++){g=y[m];c=g.$();C=L[m];c.css({position:"absolute",top:C.top,left:C.left,height:C.height})}e.height(v.getHeight())};return y});