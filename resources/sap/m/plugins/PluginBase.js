/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Element"],function(t){"use strict";var e=t.extend("sap.m.plugins.PluginBase",{metadata:{abstract:true,library:"sap.m",properties:{enabled:{type:"boolean",defaultValue:true}}}});var i={};e.setConfig=function(t,n){var r=typeof n=="function"?n.getMetadata().getName():e.getMetadata().getName();Object.assign(i[r]=i[r]||{},t)};e.getPlugin=function(t,e){return t.getDependents().find(function(t){return t.isA(e)})};e.prototype.init=function(){this._bIsActive=false};e.prototype.isActive=function(){return this._bIsActive};e.prototype.getControl=function(){return this.getParent()};e.prototype.getControlPluginConfig=function(t,n,r,a){var o=this.getControl();if(!o){return n}var s=this.getMetadata().getName();var p=o.getMetadata().getName();var u=i[s]||{};var c=u[p]||{};var f=function(e){return typeof e[t]=="function"?e[t].call(e,r,a):e[t]};if(t in c){return f(c)}for(var l in u){if(o.isA(l)&&t in u[l]){return f(u[l])}}var g=e.getMetadata().getName();var h=i[g]||{};var v=h[p]||{};if(t in v){return f(v)}for(var l in h){if(o.isA(l)&&t in h[l]){return f(h[l])}}return n};e.prototype.isApplicable=function(t){return t.isA("sap.ui.core.Control")};e.prototype.onActivate=function(t){};e.prototype.onDeactivate=function(t){};e.prototype.setParent=function(e){var i=this.getEnabled();if(i&&this.getControl()){this._deactivate()}t.prototype.setParent.apply(this,arguments);if(e&&i){if(!this.isApplicable(e)){throw new Error(this+" is not applicable to "+e)}else{this._activate()}}return this};e.prototype.setEnabled=function(t){var e=this.getEnabled();this.setProperty("enabled",t,true);var i=this.getEnabled();if(i!=e&&this.getControl()){if(i){this._activate()}else{this._deactivate()}}return this};e.prototype.setProperty=function(e,i,n){n=n||(this.getMetadata().getProperty(e).appData||{}).invalidate===false;return t.prototype.setProperty.call(this,e,i,n)};e.prototype._activate=function(){if(!this.isActive()){this.onActivate(this.getControl());this.getControlPluginConfig("onActivate",undefined,this.getControl(),this);this._bIsActive=true}};e.prototype._deactivate=function(){if(this.isActive()){this.onDeactivate(this.getControl());this.getControlPluginConfig("onDeactivate",undefined,this.getControl(),this);this._bIsActive=false}};return e});